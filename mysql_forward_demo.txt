# 前提条件:
# 只有10.1.240.31 可以访问10.1.241.11 上的mysql 数据库
# 但是现在需要通过一个ip地址为172.30.80.89 的客户端访问下10.1.241.11 上的数据库
# 那么要建立通过10.1.240.31 来转发172.30.80.89的请求到 10.1.241.11，并且伪装为10.1.240.31 在访问10.1.241.11


#开启数据转发
echo "1" > /proc/sys/net/ipv4/ip_forward

将数据来源地址为172.30.80.89 的数据 伪装为来源地址为 10.1.240.31
iptables -t nat -A POSTROUTING -s 172.30.80.89 -j SNAT --to-source 10.1.240.31 

将访问本机目标端口为3308的连接 转到访问ip地址为10.1.240.31 端口为3306
iptables -t nat -A PREROUTING -p tcp  --dport 3308  -j DNAT --to-destination 10.1.241.11:3306
